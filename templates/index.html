{% extends 'base.html' %}
{% block play %}
{% set count = 1 %}


<div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
        
                <a class="navbar-brand" href="{{ url_for('logout') }}">Logout</a>
                <form class="navbar-form navbar-left" role="search">
                        <div class="form-group">
                          <input type="text" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-outline-success my-2 my-sm-0">Submit</button>
                      </form>
            </div>
        </div>
</div>

{% for title,path in video_files %}


<div class="movie_container">

    <div class="movie-image-container">

       <a href="{{ url_for('play',p=path) }}"> <img width="120" height="180" src="static/img/img.jpg" /></a>


    </div>
    
    <a href="{{ url_for('play',p=path) }}" class="movie-title"   >{{title|replace(".", " ") }} </a>
    <div class="movie-releaseDate movie-title" > Release Date</div>
    
</div>

  
{% endfor %}

<script>



window.onscroll = function() {
  var d = document.documentElement;
  var offset = d.scrollTop + window.innerHeight;
  var height = d.offsetHeight;

  console.log('offset = ' + offset);
  console.log('height = ' + height);

  if (offset === height) {
    console.log('At the bottom');
    test()
  }
};

function test()
{
    $.ajax
    ({
        type: "POST",
        url: "/index",
        success: function(data)
        {
          store = data
          for (i=0;i<store.length;i++)
          {
            for(j=0;j<store[i].length - 1;j++)
            {
              console.log(" Name : " + store[i][j]+ "\n" + "Link: " +store[i][j+1])
              var html =[
                '<div class =movie_container>',
          '<div class="movie-image-container">',

            '<a href= /play?p='+ store[i][j+1] + '> <img width="120" height="180" src="static/img/img.jpg" /></a>',


          '</div>',
          
          '<a href= /play?p=' + store[i][j+1]  + ' class=movie-title>' + store[i][j]  + ' </a>',
          '<div class="movie-releaseDate movie-title" > Release Date</div>',
          '</div>'
          ].join("\n");
              $("#container").append(html);
            }
          }
          var links = document.getElementsByTagName("link");
          for (var cl in links) {    var link = links[cl];     if (link.rel === "stylesheet")        link.href += "";   }
        }
      
    });

}

</script>
{% endblock %}
